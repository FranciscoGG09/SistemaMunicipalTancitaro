{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Franc\\\\Documents\\\\SistemaMunicipalTancitaro\\\\frontend\\\\src\\\\components\\\\dashboard\\\\ReportMap.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { MapContainer, TileLayer, Marker, Popup } from 'react-leaflet';\nimport 'leaflet/dist/leaflet.css';\nimport L from 'leaflet';\nimport { Box, Typography, Paper } from '@mui/material';\nimport api from '../../services/api';\n\n// Fix leafet marker icons\nimport icon from 'leaflet/dist/images/marker-icon.png';\nimport iconShadow from 'leaflet/dist/images/marker-shadow.png';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nlet DefaultIcon = L.icon({\n  iconUrl: icon,\n  shadowUrl: iconShadow,\n  iconSize: [25, 41],\n  iconAnchor: [12, 41]\n});\nL.Marker.prototype.options.icon = DefaultIcon;\nconst ReportMap = () => {\n  _s();\n  const [reportes, setReportes] = useState([]);\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    const fetchReportes = async () => {\n      try {\n        const response = await api.get('/reportes');\n        // Filter reports that have location data\n        const reportesConUbicacion = response.data.reportes.filter(r => r.latitud && r.longitud);\n        setReportes(reportesConUbicacion);\n      } catch (error) {\n        console.error('Error cargando reportes para el mapa', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchReportes();\n  }, []);\n  if (loading) return /*#__PURE__*/_jsxDEV(Typography, {\n    children: \"Cargando mapa...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 44,\n    columnNumber: 25\n  }, this);\n\n  // Default center (Tancítaro coordinates)\n  const center = [19.3361, -102.3644];\n  return /*#__PURE__*/_jsxDEV(Paper, {\n    elevation: 3,\n    sx: {\n      p: 2,\n      height: '500px',\n      display: 'flex',\n      flexDirection: 'column'\n    },\n    children: [/*#__PURE__*/_jsxDEV(Typography, {\n      variant: \"h6\",\n      gutterBottom: true,\n      children: \"Mapa de Reportes\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        flexGrow: 1\n      },\n      children: /*#__PURE__*/_jsxDEV(MapContainer, {\n        center: center,\n        zoom: 13,\n        style: {\n          height: '100%',\n          width: '100%'\n        },\n        children: [/*#__PURE__*/_jsxDEV(TileLayer, {\n          attribution: \"\\xA9 <a href=\\\"https://www.openstreetmap.org/copyright\\\">OpenStreetMap</a> contributors\",\n          url: \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 21\n        }, this), reportes.map(reporte => /*#__PURE__*/_jsxDEV(Marker, {\n          position: [reporte.latitud, reporte.longitud],\n          children: /*#__PURE__*/_jsxDEV(Popup, {\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"subtitle2\",\n              children: reporte.titulo\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 61,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"body2\",\n              children: reporte.categoria\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 62,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"caption\",\n              children: new Date(reporte.creado_en).toLocaleDateString()\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 63,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 29\n          }, this)\n        }, reporte.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 25\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 50,\n    columnNumber: 9\n  }, this);\n};\n_s(ReportMap, \"08IH8YDDF8RWfK1czbmNH2Q/2Rg=\");\n_c = ReportMap;\nexport default ReportMap;\nvar _c;\n$RefreshReg$(_c, \"ReportMap\");","map":{"version":3,"names":["React","useEffect","useState","MapContainer","TileLayer","Marker","Popup","L","Box","Typography","Paper","api","icon","iconShadow","jsxDEV","_jsxDEV","DefaultIcon","iconUrl","shadowUrl","iconSize","iconAnchor","prototype","options","ReportMap","_s","reportes","setReportes","loading","setLoading","fetchReportes","response","get","reportesConUbicacion","data","filter","r","latitud","longitud","error","console","children","fileName","_jsxFileName","lineNumber","columnNumber","center","elevation","sx","p","height","display","flexDirection","variant","gutterBottom","flexGrow","zoom","style","width","attribution","url","map","reporte","position","titulo","categoria","Date","creado_en","toLocaleDateString","id","_c","$RefreshReg$"],"sources":["C:/Users/Franc/Documents/SistemaMunicipalTancitaro/frontend/src/components/dashboard/ReportMap.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { MapContainer, TileLayer, Marker, Popup } from 'react-leaflet';\r\nimport 'leaflet/dist/leaflet.css';\r\nimport L from 'leaflet';\r\nimport { Box, Typography, Paper } from '@mui/material';\r\nimport api from '../../services/api';\r\n\r\n// Fix leafet marker icons\r\nimport icon from 'leaflet/dist/images/marker-icon.png';\r\nimport iconShadow from 'leaflet/dist/images/marker-shadow.png';\r\n\r\nlet DefaultIcon = L.icon({\r\n    iconUrl: icon,\r\n    shadowUrl: iconShadow,\r\n    iconSize: [25, 41],\r\n    iconAnchor: [12, 41]\r\n});\r\n\r\nL.Marker.prototype.options.icon = DefaultIcon;\r\n\r\nconst ReportMap = () => {\r\n    const [reportes, setReportes] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        const fetchReportes = async () => {\r\n            try {\r\n                const response = await api.get('/reportes');\r\n                // Filter reports that have location data\r\n                const reportesConUbicacion = response.data.reportes.filter(\r\n                    r => r.latitud && r.longitud\r\n                );\r\n                setReportes(reportesConUbicacion);\r\n            } catch (error) {\r\n                console.error('Error cargando reportes para el mapa', error);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        fetchReportes();\r\n    }, []);\r\n\r\n    if (loading) return <Typography>Cargando mapa...</Typography>;\r\n\r\n    // Default center (Tancítaro coordinates)\r\n    const center = [19.3361, -102.3644];\r\n\r\n    return (\r\n        <Paper elevation={3} sx={{ p: 2, height: '500px', display: 'flex', flexDirection: 'column' }}>\r\n            <Typography variant=\"h6\" gutterBottom>Mapa de Reportes</Typography>\r\n            <Box sx={{ flexGrow: 1 }}>\r\n                <MapContainer center={center} zoom={13} style={{ height: '100%', width: '100%' }}>\r\n                    <TileLayer\r\n                        attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\r\n                        url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n                    />\r\n                    {reportes.map((reporte) => (\r\n                        <Marker key={reporte.id} position={[reporte.latitud, reporte.longitud]}>\r\n                            <Popup>\r\n                                <Typography variant=\"subtitle2\">{reporte.titulo}</Typography>\r\n                                <Typography variant=\"body2\">{reporte.categoria}</Typography>\r\n                                <Typography variant=\"caption\">{new Date(reporte.creado_en).toLocaleDateString()}</Typography>\r\n                            </Popup>\r\n                        </Marker>\r\n                    ))}\r\n                </MapContainer>\r\n            </Box>\r\n        </Paper>\r\n    );\r\n};\r\n\r\nexport default ReportMap;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}